[{"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/index.js":"1","/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/reportWebVitals.js":"2","/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/App.js":"3","/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/Routes.js":"4","/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/components/Home.js":"5","/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/components/NotFound.js":"6","/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/config.js":"7","/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/components/Login.js":"8","/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/libs/contextLib.js":"9","/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/components/LoaderButton.js":"10","/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/libs/errorLib.js":"11","/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/components/Signup.js":"12","/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/libs/hooksLib.js":"13","/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/components/Profile.js":"14"},{"size":1203,"mtime":1607115959094,"results":"15","hashOfConfig":"16"},{"size":362,"mtime":499162500000,"results":"17","hashOfConfig":"16"},{"size":2104,"mtime":1607558646388,"results":"18","hashOfConfig":"16"},{"size":687,"mtime":1607567833416,"results":"19","hashOfConfig":"16"},{"size":268,"mtime":1607550328547,"results":"20","hashOfConfig":"16"},{"size":200,"mtime":1607115610277,"results":"21","hashOfConfig":"16"},{"size":419,"mtime":1607549715718,"results":"22","hashOfConfig":"16"},{"size":3829,"mtime":1607572419692,"results":"23","hashOfConfig":"16"},{"size":169,"mtime":1607120376926,"results":"24","hashOfConfig":"16"},{"size":491,"mtime":1607395921464,"results":"25","hashOfConfig":"16"},{"size":191,"mtime":1607396053882,"results":"26","hashOfConfig":"16"},{"size":3767,"mtime":1607551891471,"results":"27","hashOfConfig":"16"},{"size":287,"mtime":1607473970693,"results":"28","hashOfConfig":"16"},{"size":2895,"mtime":1607567576537,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"1lrgylq",{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"59","usedDeprecatedRules":"32"},"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/index.js",[],["60","61"],"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/reportWebVitals.js",[],"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/App.js",[],"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/Routes.js",[],"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/components/Home.js",[],"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/components/NotFound.js",[],"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/config.js",[],"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/components/Login.js",[],"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/libs/contextLib.js",[],"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/components/LoaderButton.js",[],"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/libs/errorLib.js",[],"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/components/Signup.js",[],"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/libs/hooksLib.js",[],"/Users/myang/Vandy_ds/fa20/finals/cloud-final/mfa-app-client/src/components/Profile.js",["62"],"import React, { useState, useEffect }from \"react\";\nimport { Auth } from \"aws-amplify\";\nimport \"./Home.css\";\nimport AWS from 'aws-sdk'\nimport { onError } from \"../libs/errorLib\";\nimport QRCode from 'qrcode.react';\n\n\nexport default function Profile() {\n  const [user, setUser] = useState(null);\n  const [userCode, setUserCode] = useState('');\n  const [accessToken, setAccessToken] = useState('');\n  const [qrCode, setQrcode] = useState(null);\n  const [enabled, setEnabled] = useState(false);\n  const cognito = new AWS.CognitoIdentityServiceProvider({ region: 'us-east-1' });\n\n  useEffect(() => {\n    getUser();\n    getToken();\n\n    console.log(user);\n    console.log(accessToken);\n\n    getMFAsettings();\n  }, []);\n\n  async function getUser() {\n    try {\n      Auth.currentAuthenticatedUser().then(user => setUser(user));\n    } catch (e) {\n      onError(e);\n    }\n  }\n\n  async function getToken() {\n    try {\n      Auth.currentSession().then(res => setAccessToken(res.getAccessToken().getJwtToken()));\n    } catch (e) {\n      onError(e);\n    }\n  }\n\n\n  async function getMFAsettings() {\n    const mfaEnabled = await new Promise((resolve) => {\n      cognito.getUser(\n        {\n          AccessToken: accessToken,\n        },\n        (err, data) => {\n          if (err) resolve(false)\n          else\n            resolve(\n              data.UserMFASettingList &&\n                data.UserMFASettingList.includes('SOFTWARE_TOKEN_MFA')\n            )\n        }\n      )\n    })\n    setEnabled(mfaEnabled);\n    console.log(mfaEnabled);\n    console.log(enabled);\n  }\n\n  const getQRCode = (event) => {\n    event.preventDefault()\n    try {\n      Auth.setupTOTP(user).then((code) => {\n        const authCode = \"otpauth://totp/AWSCognito:\"+ user.username + \"?secret=\" + code + \"&issuer=AWSCognito\";\n        setQrcode(authCode);\n      });\n    } catch (e) {\n      onError(e);\n    }\n  }\n\n  const enableMFA = (event) => {\n    event.preventDefault();\n\n    console.log('USER CODE:', userCode);\n\n    try {\n      Auth.verifyTotpToken(user, userCode).then(() => {\n        Auth.setPreferredMFA(user, 'TOTP');\n      });\n      setEnabled(true)\n    } catch (e) {\n      onError(e);\n    }\n  }\n\n  return (\n    <div className=\"Home\">\n      <div className=\"lander\">\n      <h1>Multi-Factor Authentication</h1>\n        {enabled ? (\n          <div>\n            <div>MFA is enabled</div>\n          </div>\n        ) : qrCode ? (\n          <div>\n            <h3>Scan this QR code:</h3>\n            <QRCode value={qrCode}/>\n\n            <form onSubmit={enableMFA}>\n              <input\n                value={userCode}\n                onChange={(event) => setUserCode(event.target.value)}\n                required\n              />\n\n              <button type=\"submit\">Confirm Code</button>\n            </form>\n          </div>\n        ) : (\n          <button onClick={getQRCode}>Enable MFA</button>\n        )}\n    </div>\n    </div>\n  );\n}\n",{"ruleId":"63","replacedBy":"64"},{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","severity":1,"message":"68","line":25,"column":6,"nodeType":"69","endLine":25,"endColumn":8,"suggestions":"70"},"no-native-reassign",["71"],"no-negated-in-lhs",["72"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'accessToken', 'getMFAsettings', and 'user'. Either include them or remove the dependency array.","ArrayExpression",["73"],"no-global-assign","no-unsafe-negation",{"desc":"74","fix":"75"},"Update the dependencies array to be: [accessToken, getMFAsettings, user]",{"range":"76","text":"77"},[707,709],"[accessToken, getMFAsettings, user]"]